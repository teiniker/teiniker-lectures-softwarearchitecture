Exercise: Replace integer IDs with UUID strings
-------------------------------------------------------------------------------

When we use auto generated id values (which is usual a sequence like 1,2,3,...)
an attacker can easily guess id values.

To defend the given Web service against these attacks, you should replace the
given id (which is an integer value generated by the database) with a UUID string.

1. Change src/test/resources/createUserTable.sql

2. Refactor the classes "User" and "UserDTO"

3. Refactor "UserDAOImpl" and "UserResourceEJB"

You can review the class UUIDTest to see how to generate a random UUID!


Use SoapUI to test your refactorings:

URL: http://localhost:8080/REST-EJB-UserService-UUID-Exercise/v1/users
                           
1) Insert the following users
-----------------------------

    POST http://localhost:8080/REST-EJB-UserService-UUID-Exercise/v1/users HTTP/1.1
    Accept-Encoding: gzip,deflate
    Content-Type: application/json
    Content-Length: 86
    Host: localhost:8080
    Connection: Keep-Alive
    User-Agent: Apache-HttpClient/4.1.1 (java 1.5)

    {
       "id": "",
       "username": "homer",
       "password": "ijD8qepbRnIsva0kx0cKRCcYysg="
    }


    POST http://localhost:8080/REST-EJB-UserService-UUID-Exercise/v1/users HTTP/1.1
    Accept-Encoding: gzip,deflate
    Content-Type: application/json
    Content-Length: 87
    Host: localhost:8080
    Connection: Keep-Alive
    User-Agent: Apache-HttpClient/4.1.1 (java 1.5)

    {
       "id": "",
       "username": "marge",
       "password": "xCSuPDv2U6I5jEO1wqvEQ/jPYhY="
    }


    POST http://localhost:8080/REST-EJB-UserService-UUID-Exercise/v1/users HTTP/1.1
    Accept-Encoding: gzip,deflate
    Content-Type: application/json
    Content-Length: 86
    Host: localhost:8080
    Connection: Keep-Alive
    User-Agent: Apache-HttpClient/4.1.1 (java 1.5)

    {
       "id": "",
       "username": "lisa",
       "password": "xO0U4gIN1F7bV7X7ovQN2TlSUF4="
    }


2) Check the database table

MariaDB [testdb]> select * from user;
+--------------------------------------+----------+------------------------------+
| id                                   | username | password                     |
+--------------------------------------+----------+------------------------------+
| 364cbc28-b04b-4ecf-80de-17d6e23cc4df | lisa     | xO0U4gIN1F7bV7X7ovQN2TlSUF4= |
| 50139af2-4374-4bb5-abbe-7bde34c22ed1 | homer    | ijD8qepbRnIsva0kx0cKRCcYysg= |
| a341e023-dd66-4475-ad3c-287f65efff3e | marge    | xCSuPDv2U6I5jEO1wqvEQ/jPYhY= |
+--------------------------------------+----------+------------------------------+


3) Request all users to find out their uuid values
--------------------------------------------------

    HTTP/1.1 200 OK
    Connection: keep-alive
    Content-Type: application/json
    Content-Length: 321
    Date: Wed, 05 Dec 2018 18:12:46 GMT

    [
        {
            "id":"364cbc28-b04b-4ecf-80de-17d6e23cc4df",
            "username":"lisa",
            "password":"xO0U4gIN1F7bV7X7ovQN2TlSUF4="
        },

        {
            "id":"50139af2-4374-4bb5-abbe-7bde34c22ed1",
            "username":"homer",
            "password":"ijD8qepbRnIsva0kx0cKRCcYysg="
        },

        {
            "id":"a341e023-dd66-4475-ad3c-287f65efff3e",
            "username":"marge",
            "password":"xCSuPDv2U6I5jEO1wqvEQ/jPYhY="
        }
    ]


4) Request a single user by its UUID
------------------------------------

    GET http://localhost:8080/REST-EJB-UserService-UUID-Exercise/v1/users/364cbc28-b04b-4ecf-80de-17d6e23cc4df HTTP/1.1
    Accept-Encoding: gzip,deflate
    accept: application/json
    Host: localhost:8080
    Connection: Keep-Alive
    User-Agent: Apache-HttpClient/4.1.1 (java 1.5)


    HTTP/1.1 200 OK
    Connection: keep-alive
    Content-Type: application/json
    Content-Length: 69
    Date: Wed, 05 Dec 2018 18:27:55 GMT

    {
        "id":"364cbc28-b04b-4ecf-80de-17d6e23cc4df",
        "username":"lisa",
        "password":"xO0U4gIN1F7bV7X7ovQN2TlSUF4="
    }
